<?xml version="1.0"?>
<project name="Linux" basedir=".">

	<condition property="variante" value="">
		<os arch="i386" />
	</condition>
	<condition property="variante" value="64">
		<os arch="amd64" />
	</condition>

	<property name="target.dir" value="${basedir}/../../target/linux" />

	<target name="build">
		<mkdir dir="${target.dir}" />

		<copy todir="${target.dir}/lib">
			<fileset dir="${target.dir}/../lib" includes="*.jar" />
			<fileset dir="${basedir}/lib${variante}" includes="**" />
		</copy>

		<copy tofile="${target.dir}/${app.name}" file="${basedir}/launch.sh" />

		<chmod perm="755" file="${target.dir}/${app.name}" />
	</target>

	<target name="dist">
		<exec executable="tar" dir="${target.dir}/..">
            <arg value="--transform=s/linux/${app.name}-${app.version}/" />
			<arg value="-z" />
			<arg value="-c" />
			<arg value="-f" />
			<arg value="${app.name}-${app.version}-linux${variante}.tgz" />
			<arg value="linux" />
		</exec>
	</target>

</project>
